@import 'tailwindcss/base';
@import 'tailwindcss/components';
@import 'tailwindcss/utilities';

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
*/

@layer base {
  :root {
    /* Artive Color System - Light Mode */
    --background: 35 50% 98%; /* ivory #FEFAF6 */
    --foreground: 20 10% 11%; /* faded ink black #1E1B18 */
    
    --card: 0 0% 100% / 0.9; /* translucent white */
    --card-foreground: 20 10% 11%;
    
    --popover: 0 0% 100%;
    --popover-foreground: 20 10% 11%;
    
    --primary: 20 10% 11%; /* ink */
    --primary-foreground: 35 50% 98%;
    
    --secondary: 25 35% 81%; /* blush rose #E8C9B0 */
    --secondary-foreground: 20 10% 11%;
    
    --muted: 120 15% 68%; /* muted sage #A3B9A5 */
    --muted-foreground: 20 10% 40%;
    
    --accent: 280 30% 82%; /* washed lilac #D4C3DE */
    --accent-foreground: 20 10% 11%;
    
    --accent-1: 25 35% 81%; /* blush rose #E8C9B0 */
    --accent-2: 120 15% 68%; /* muted sage */
    --accent-3: 280 30% 82%; /* washed lilac */
    
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    
    --border: 25 20% 88%;
    --input: 25 20% 88%;
    --ring: 20 10% 11%;
    
    --radius: 0.5rem;
    
    /* Artive Special Tokens */
    --paper-grain-opacity: 0.03;
    --ink-blur: 0.4;
    --tear-angle: 3deg;
    
    /* Typography Scale */
    --font-display: 'Playfair Display', serif;
    --font-body: 'Inter', sans-serif;
    --font-handwritten: 'Fredericka the Great', cursive;
    --font-logo: 'Caveat', cursive;
    --font-playwrite: 'Playwrite US Modern', cursive;
    
    /* Motion */
    --ease-organic: cubic-bezier(.2, .9, .3, 1);
    --duration-hover: 220ms;
    --duration-reveal: 360ms;
    --duration-long: 700ms;
  }

  .dark {
    /* Artive Color System - Dark Mode */
    --background: 270 10% 6%; /* charcoal ink #0F0E10 */
    --foreground: 30 10% 74%; /* cloud grey #BFB9B6 */
    
    --card: 0 0% 5% / 0.6; /* translucent dark */
    --card-foreground: 30 10% 74%;
    
    --popover: 270 10% 6%;
    --popover-foreground: 30 10% 74%;
    
    --primary: 30 10% 74%; /* cloud grey */
    --primary-foreground: 270 10% 6%;
    
    --secondary: 260 70% 72%; /* electric mauve #9C7DF0 */
    --secondary-foreground: 270 10% 6%;
    
    --muted: 220 35% 60%; /* watercolor blue #6D89C4 */
    --muted-foreground: 30 10% 60%;
    
    --accent: 40 70% 65%; /* golden smudge #E8B660 */
    --accent-foreground: 270 10% 6%;
    
    --accent-1: 40 70% 65%; /* golden smudge #E8B660 */
    --accent-2: 220 35% 60%; /* watercolor blue */
    --accent-3: 260 70% 72%; /* electric mauve */
    
    --destructive: 0 63% 31%;
    --destructive-foreground: 30 10% 74%;
    
    --border: 270 10% 15%;
    --input: 270 10% 15%;
    --ring: 30 10% 74%;
    
    --paper-grain-opacity: 0.02;
  }
}

@layer base {
  * {
    border-color: hsl(var(--border));
  }

  body {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    font-family: var(--font-body);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    position: relative;
  }
  
  /* Paper grain texture overlay */
  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: var(--paper-grain-opacity);
    background-image: 
      repeating-linear-gradient(0deg, transparent, transparent 2px, hsl(var(--foreground)) 2px, hsl(var(--foreground)) 3px),
      repeating-linear-gradient(90deg, transparent, transparent 2px, hsl(var(--foreground)) 2px, hsl(var(--foreground)) 3px);
    background-size: 4px 4px;
    pointer-events: none;
    z-index: 1;
    mix-blend-mode: multiply;
  }
  
  .dark body::before {
    opacity: 0.02;
    mix-blend-mode: screen;
    background-image: 
      repeating-linear-gradient(0deg, transparent, transparent 2px, hsl(var(--foreground)) 2px, hsl(var(--foreground)) 3px),
      repeating-linear-gradient(90deg, transparent, transparent 2px, hsl(var(--foreground)) 2px, hsl(var(--foreground)) 3px);
    background-size: 4px 4px;
  }
  
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-display);
  }
  
  .font-handwritten {
    font-family: var(--font-handwritten);
  }
  
  .font-cursive {
    font-family: 'Dancing Script', cursive;
  }
  
  .font-playwrite {
    font-family: var(--font-playwrite);
  }
}

@layer components {
  /* Torn edge effect using clip-path */
  .torn-edge {
    clip-path: polygon(
      0% 2%, 3% 0%, 7% 3%, 12% 1%, 18% 4%, 23% 2%, 29% 5%, 35% 3%, 
      41% 6%, 47% 4%, 53% 7%, 59% 5%, 65% 8%, 71% 6%, 76% 9%, 82% 7%, 
      88% 10%, 94% 8%, 97% 11%, 100% 9%, 100% 15%, 98% 20%, 100% 25%, 
      98% 30%, 100% 35%, 98% 40%, 100% 45%, 98% 50%, 100% 55%, 98% 60%, 
      100% 65%, 98% 70%, 100% 75%, 98% 80%, 100% 85%, 98% 90%, 100% 95%, 
      97% 98%, 93% 100%, 88% 97%, 83% 99%, 78% 96%, 73% 98%, 68% 95%, 
      63% 97%, 58% 94%, 53% 96%, 48% 93%, 43% 95%, 38% 92%, 33% 94%, 
      28% 91%, 23% 93%, 18% 90%, 13% 92%, 8% 89%, 3% 91%, 1% 88%, 0% 85%
    );
    position: relative;
    overflow: hidden;
    /* Light mode subtle grey fill for visibility */
    background-color: rgba(0,0,0,0.06);
    border: 1px solid rgba(0,0,0,0.10);
  }
  .dark .torn-edge {
    /* Dark mode subtle translucent white */
    background-color: rgba(255,255,255,0.06);
    border-color: rgba(255,255,255,0.10);
  }
  .torn-edge::before {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    /* Deckle highlight + shadow to suggest fibers */
    background: linear-gradient(to bottom, rgba(255,255,255,0.35), rgba(255,255,255,0.0) 40%),
                linear-gradient(to top, rgba(255,255,255,0.25), rgba(255,255,255,0.0) 40%);
    mix-blend-mode: screen;
    filter: drop-shadow(0 8px 14px rgba(10,10,10,0.10));
    z-index: 1;
  }
  .torn-edge::after {
    content: '';
    position: absolute;
    inset: -2px;
    pointer-events: none;
    background-image: url('/assets/textures/paper-grain-1.png');
    background-size: 280px auto;
    opacity: 0.18;
    mix-blend-mode: multiply;
    /* Add a mask that uses the torn SVG for a more organic edge */
    -webkit-mask-image: url('/assets/masks/torn-edge.svg');
    mask-image: url('/assets/masks/torn-edge.svg');
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-size: cover;
    mask-size: cover;
    -webkit-mask-position: center;
    mask-position: center;
  }
  
  .torn-edge-soft {
    clip-path: polygon(
      1% 3%, 5% 1%, 10% 4%, 15% 2%, 20% 5%, 25% 3%, 30% 6%, 35% 4%, 
      40% 7%, 45% 5%, 50% 8%, 55% 6%, 60% 9%, 65% 7%, 70% 10%, 75% 8%, 
      80% 11%, 85% 9%, 90% 12%, 95% 10%, 98% 13%, 100% 50%, 98% 87%, 
      95% 90%, 90% 88%, 85% 91%, 80% 89%, 75% 92%, 70% 90%, 65% 93%, 
      60% 91%, 55% 94%, 50% 92%, 45% 95%, 40% 93%, 35% 96%, 30% 94%, 
      25% 97%, 20% 95%, 15% 98%, 10% 96%, 5% 99%, 2% 97%, 0% 50%
    );
    position: relative;
    overflow: hidden;
    background-color: rgba(0,0,0,0.05);
    border: 1px solid rgba(0,0,0,0.08);
  }
  .dark .torn-edge-soft {
    background-color: rgba(255,255,255,0.06);
    border-color: rgba(255,255,255,0.09);
  }

  /* Tone down grain overlay in dark mode for subtler feel */
  .dark .torn-edge::after { opacity: 0.10; }
  .dark .torn-edge-soft::after { opacity: 0.08; }
  .torn-edge-soft::before {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: linear-gradient(to bottom, rgba(255,255,255,0.25), rgba(255,255,255,0.0) 40%),
                linear-gradient(to top, rgba(255,255,255,0.18), rgba(255,255,255,0.0) 40%);
    mix-blend-mode: screen;
    filter: drop-shadow(0 6px 12px rgba(10,10,10,0.08));
    z-index: 1;
  }
  .torn-edge-soft::after {
    content: '';
    position: absolute;
    inset: -2px;
    pointer-events: none;
    background-image: url('/assets/textures/paper-grain-1.png');
    background-size: 300px auto;
    opacity: 0.14;
    mix-blend-mode: multiply;
    -webkit-mask-image: url('/assets/masks/torn-edge.svg');
    mask-image: url('/assets/masks/torn-edge.svg');
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-size: cover;
    mask-size: cover;
    -webkit-mask-position: center;
    mask-position: center;
  }
  
  /* Ink ripple animation */
  @keyframes ink-ripple {
    0% {
      transform: scale(0.4);
      opacity: 0.6;
    }
    50% {
      opacity: 0.3;
    }
    100% {
      transform: scale(1.2);
      opacity: 0;
    }
  }
  
  /* Shard hover animation */
  @keyframes shard-lift {
    0% {
      transform: translateY(0) rotate(var(--shard-rotation, 2deg));
    }
    100% {
      transform: translateY(-8px) rotate(0deg);
    }
  }
  
  /* Brush stroke reveal */
  @keyframes brush-reveal {
    0% {
      stroke-dashoffset: 1000;
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      stroke-dashoffset: 0;
      opacity: 0.35;
    }
  }
  /* Ambient float particles for Forklore */
  @keyframes float0 {
    0% { transform: translateY(0) translateX(0); opacity: 0.6; }
    50% { transform: translateY(-8px) translateX(3px); opacity: 0.9; }
    100% { transform: translateY(0) translateX(0); opacity: 0.6; }
  }
  @keyframes float1 {
    0% { transform: translateY(0) translateX(0); opacity: 0.4; }
    50% { transform: translateY(-6px) translateX(-2px); opacity: 0.8; }
    100% { transform: translateY(0) translateX(0); opacity: 0.4; }
  }
  @keyframes float2 {
    0% { transform: translateY(0) translateX(0); opacity: 0.5; }
    50% { transform: translateY(-10px) translateX(1px); opacity: 0.85; }
    100% { transform: translateY(0) translateX(0); opacity: 0.5; }
  }
  
  /* Fade in with organic motion */
  @keyframes organic-fade-in {
    0% {
      opacity: 0;
      transform: translateY(20px) scale(0.98);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }
  
  .animate-shard-lift {
    animation: shard-lift var(--duration-hover) var(--ease-organic);
  }
  
  .animate-organic-fade-in {
    animation: organic-fade-in var(--duration-reveal) var(--ease-organic);
  }
}
